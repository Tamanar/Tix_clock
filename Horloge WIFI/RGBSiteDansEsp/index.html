<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="data:,">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.0.4/jscolor.min.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<h1>ESP Color Picker 1</h1>
			</div>
			<a class="btn btn-primary btn-lg" href="" id="change_color1" role="button">Change Color</a>
			<input class="jscolor {onFineChange:'update(this)'}" id="P1">
		</div>
    <div class="container">
			<div class="row">
				<h1>ESP Color Picker 2b</h1>
			</div>
			<a class="btn btn-primary btn-lg" href="" id="change_color2" >Change Color</a>
			<input class="jscolor {onFineChange:'update(this)'}" id="P2">
		</div>

		<div id="buttons">
			<a  href="" id="Horloge" role="button">
			<button onclick=sendTime()>SetClock</button> </a>
		  </div>
		  <div id="buttons">
			<a  href="" id="Rainbow" role="button">
			<button onclick=rainbow()>Rainbow</button> </a>
		  </div>
		<script>
			function update(picker) {
        console.log(picker.targetElement.id)
				document.getElementById(picker.targetElement.id).innerHTML = Math.round(picker.rgb[0]) + ', ' +  Math.round(picker.rgb[1]) + ', ' + Math.round(picker.rgb[2]);
				document.getElementById("change_color"+picker.targetElement.id.slice(-1)).href="?r" + Math.round(picker.rgb[0]) + "g" +  Math.round(picker.rgb[1]) + "b" + Math.round(picker.rgb[2]) +picker.targetElement.id+ "&";
			}
			
			function checkTime(i) {
  return (i < 10) ?  "0" + i : i; 
}

			function sendTime() {
  var today = new Date();
      h = checkTime(today.getHours());
      min = checkTime(today.getMinutes());
      s = checkTime(today.getSeconds());
	  document.getElementById("Horloge").href="?r"+h+"g"+min+"b"+s+"P4&";
	  console.log("T"+h+min+s);
			}
			function rainbow(){
				document.getElementById("Rainbow").href="?r1g1b1P7&";
			}
		</script>
	</body>
</html>

